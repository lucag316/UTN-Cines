<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Metadata y configuración básica -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta</title>

    <!-- Tipografía -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

    <!-- Favicon del sitio -->
    <link rel="shortchut icon" href="../icons/favicon1.png" type="image/x-icon">

    <!-- Bootstrap CSS para estilos base y componentes responsivos -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Estilos personalizados del sitio -->
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/formularios.css">

</head>

<body>
    <!-- Barra de Navegación -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <!-- Logo de la marca con enlace a la página principal -->
            <a class="navbar-brand" href="../index.html">
                <img src="../images/marca.png" class="nav_img" alt="" id="marca_img">
            </a>

            <!-- Botón para el menú desplegable en dispositivos móviles -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <!-- Enlaces del menú de navegación -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Películas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="promociones.html">Promociones</a>
                    </li>

                    <!-- Carrito de compras con menú desplegable -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="cartDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Carrito
                            <span class="badge bg-primary" id="cartCount">0</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="cartDropdown" id="cartItems">
                            <li class="dropdown-item text-center text-muted">El carrito está vacío</li>
                        </ul>
                    </li>

                    <!-- Menú desplegable para usuario -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Usuario
                        </a>
                        <!-- Menú desplegable -->
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="perfil_usuario.html">Perfil</a></li>
                            <li><a class="dropdown-item" href="login.html">Login</a></li>
                            <!-- <li><a class="dropdown-item" href="html/register.html">Registrarme</a></li> -->
                            <li><a class="dropdown-item" href="admin.html">Admin</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    <!-- Encabezado del formulario -->
    <header id="header-consulta">
        <h1>Formulario de Consulta</h1>
    </header>

    <!-- Contenido principal -->
    <main id="main-consulta" class="container my-5 formulario-general">
        <h2 class="text-center mb-4">Envia tu Consulta</h2>

        <!-- Formulario -->
        <form class="row g-3">

            <!-- Motivo de consulta -->
            <div class="eleccion-consulta mb-3 item-formulario col-12">
                <label for="seleccion-consulta" class="form-label">Motivo de consulta:</label>
                <select name="seleccion-consulta" id="seleccion-consulta" class="form-select select-general" required>
                    <option value="horarios">Horarios de películas</option>
                    <option value="entradas">Disponibilidad de entradas</option>
                    <option value="promociones">Promociones</option>
                    <option value="reembolsos">Reembolsos</option>
                    <option value="otra">Otra</option>
                </select>
            </div>

            <!-- Nombre y apellido-->
            <div class="nombre-apellido mb-3 col-12 d-flex flex-wrap">
                <div class="nombre item-formulario flex-fill me-2 ">
                    <label for="nombre" class="form-label">Nombre:</label>
                    <input id="nombre" name="nombre" type="text" class="form-control input-general" placeholder="Nombre" minlength="3" required> 
                </div>

                <div class="apellido item-formulario flex-fill">
                    <label for="apellido" class="form-label">Apellido:</label>
                    <input id="apellido" name="apellido" type="text" class="form-control input-general" placeholder="Apellido" minlength="3" required>
                </div>
            </div>

            <!-- Telefono y email -->
            <div class="email-telefono mb-3 col-12 d-flex flex-wrap">
                <div class="email item-formulario flex-fill me-2">
                    <label for="email" class="form-label">Email:</label>
                    <input id="email" type="text" class="form-control input-general" placeholder="Email" required>
                </div>

                <div class="telefono item-formulario flex-fill me-2">
                    <label for="telefono" class="form-label">Telefono:</label>
                    <input id="telefono" type="number" class="form-control input-general" placeholder="Telefono" required>
                </div>
            </div>

            <!-- Mensaje -->
            <div class="mensaje mb-3 item-formulario">
                <label for="mensaje" class="form-label">Mensaje:</label>
                <textarea id="mensaje" name="mensaje" rows="6" class="form-control input-general" placeholder="Escribe tu consulta aca"></textarea>
            </div>

            <!-- Preferencia de respuesta -->
            <div class="preferencia-respuesta-container item-formulario">
                <label for="preferencia-respuesta" class="form-label">Preferencia de respuesta:</label>
                <label><input type="radio" name="contacto" value="email" required> Email</label>
                <label><input type="radio" name="contacto" value="telefono" required> Teléfono</label>
            </div>

            <!-- Términos y condiciones -->
            <div class="terminos-container">
                <label class="form-label">
                    <input id="terminos" type="checkbox" required>Acepto términos y condiciones
                </label>
            </div>
        
            <!-- Botones -->
            <div class="botones col-12 text-center mt-4">
                <input type="reset" value="Limpiar" class="btn btn-secondary me-3">
                <input type="submit" value="Enviar" class="btn btn-primary">
            </div>
        </form>
    </main>


    <footer class="footer">
        <div class="footer-container">

            <!-- Contactanos por (izquierda) -->
            <div class="footer-container-contacto">
                <h5>Contactanos por</h5>

                <ul class="footer-items">
                    <li class="footer-item">
                        <a href="https://WhatsApp.com" class="footer-link" target="_blank" title="Contactanos por WhatsApp">
                            <img src="../icons/logo-whatsapp.svg" class="footer-logo" id="footer-logo-whatsapp">
                        </a>
                    </li>

                    <li class="footer-item">
                        <a href="https://Gmail.com" class="footer-link" target="_blank" title="Contactanos por Gmail">
                            <img src="../icons/logo-gmail.svg" class="footer-logo" id="footer-logo-gmail">
                        </a>
                    </li>
                </ul>

                <!-- Enlace de consulta en el centro -->
                <div class="footer-item-consulta">
                    <a href="form-consulta.html" class="footer-link-palabra">Consulta</a>
                </div>
            </div>

            <!-- Mas Info (centro) -->
            <div class="footer-container-info">
                <h5>Mas Info</h5>

                <ul class="footer-items">
                    <li class="footer-item">
                        <a class="footer-link-palabra" href="sobre-nosotros.html">Sobre nosotros</a>
                    </li>
                    <li class="footer-item">
                        <a class="footer-link-palabra" href="preguntas-frecuentes.html">Preguntas frecuentes</a>
                    </li>
                </ul>
            </div>

            <!-- Seguinos en redes (derecha) -->
            <div class="footer-container-redes">
                <h5>Seguinos en redes</h5>

                <ul class="footer-items">
                    <li class="footer-item">
                        <a href="https://Instagram.com" class="footer-link" target="_blank" title="Seguinos en Instagram">
                            <img src="../icons/logo-instagram.svg" class="footer-logo" id="footer-logo-instagram">
                        </a>
                    </li>
    
                    <li class="footer-item">
                        <a href="https://Facebook.com" class="footer-link" target="_blank" title="Seguinos en Facebook">
                            <img src="../icons/logo-facebook.svg" class="footer-logo" id="footer-logo-facebook">
                        </a>
                    </li>
    
                    <li class="footer-item">
                        <a href="https://x.com" class="footer-link" target="_blank" title="Seguinos en X">
                            <img src="../icons/logo-x.svg" class="footer-logo" id="footer-logo-x">
                        </a>
                    </li>
    
                    <li class="footer-item">
                        <a href="https://www.tiktok.com" class="footer-link" target="_blank" title="Seguinos en Tik Tok">
                            <img src="../icons/logo-tiktok.svg" class="footer-logo" id="footer-logo-tiktok">
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </footer>


    <!-- Carga de scripts externos -->
    <!-- Bootstrap: Framework CSS/JS para diseño responsivo y componentes interactivos -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Carga de archivos js para agregar funcionalidades -->
    <script>
        document.querySelector('form').addEventListener('submit', async function (e) {
            e.preventDefault(); // Prevenir el comportamiento por defecto del formulario
    
            // Recoger los datos del formulario
            const formData = {
                motivo: document.getElementById('seleccion-consulta').value,
                nombre: document.getElementById('nombre').value,
                apellido: document.getElementById('apellido').value,
                email: document.getElementById('email').value,
                telefono: document.getElementById('telefono').value,
                mensaje: document.getElementById('mensaje').value,
                preferencia_respuesta: document.querySelector('input[name="contacto"]:checked').value,
            };
    
            try {
                // Enviar los datos al servidor
                const response = await fetch('http://localhost:5000/consulta', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                });
    
                if (response.ok) {
                    // Manejar respuesta exitosa
                    const result = await response.json();
                    alert('Consulta enviada correctamente. ¡Gracias!');
                    console.log('Respuesta del servidor:', result);
                } else {
                    // Manejar errores
                    alert('Hubo un error al enviar la consulta. Por favor, inténtalo de nuevo.');
                    console.error('Error del servidor:', response.statusText);
                }
            } catch (error) {
                // Manejar errores de red u otros
                alert('Error al conectar con el servidor. Revisa tu conexión e inténtalo nuevamente.');
                console.error('Error:', error);
            }
        });
    </script>
    
</body>
</html>